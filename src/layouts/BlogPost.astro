---
import Layout from "./Layout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  updatedDate?: Date;
}

const { title, description, pubDate, updatedDate } = Astro.props;

const formattedPubDate = pubDate.toLocaleDateString("ja-JP", {
  year: "numeric",
  month: "long",
  day: "numeric",
});

const formattedUpdatedDate = updatedDate?.toLocaleDateString("ja-JP", {
  year: "numeric",
  month: "long",
  day: "numeric",
});
---

<Layout title={`${title} | Blog`} description={description}>
  <Header />
  <main class="post">
    <article>
      <header class="post-header">
        <div class="post-meta">
          <time datetime={pubDate.toISOString()}>{formattedPubDate}</time>
          {
            formattedUpdatedDate && (
              <span class="updated">（更新: {formattedUpdatedDate}）</span>
            )
          }
        </div>
        <h1>{title}</h1>
        <p class="description">{description}</p>
      </header>
      <div class="post-content"><slot /></div>
      <footer class="post-footer">
        <a href="/blog">&larr; 記事一覧に戻る</a>
      </footer>
    </article>
  </main>
  <Footer />
</Layout>

<style>
  .post {
    width: 720px;
    margin: 0 auto;
    padding: 2.5rem 1.5rem;
  }
  .post-header {
    margin-bottom: 2.5rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid var(--border);
  }
  .post-meta {
    font-size: 0.85rem;
    color: var(--muted);
    margin-bottom: 0.75rem;
  }
  .updated {
    color: var(--muted);
  }
  h1 {
    font-size: 2rem;
    font-weight: 800;
    letter-spacing: -0.02em;
    line-height: 1.3;
    margin-bottom: 0.75rem;
  }
  .description {
    font-size: 1rem;
    color: var(--muted);
    line-height: 1.7;
  }
  .post-content {
    line-height: 1.8;
    font-size: 1rem;
  }
  .post-content :global(h2) {
    font-size: 1.5rem;
    font-weight: 700;
    margin: 2rem 0 1rem;
  }
  .post-content :global(h3) {
    font-size: 1.2rem;
    font-weight: 650;
    margin: 1.75rem 0 0.75rem;
  }
  .post-content :global(p) {
    margin-bottom: 1.25rem;
  }
  .post-content :global(ul),
  .post-content :global(ol) {
    margin-bottom: 1.25rem;
    padding-left: 1.5rem;
  }
  .post-content :global(li) {
    margin-bottom: 0.35rem;
  }
  .post-content :global(code) {
    font-size: 0.9em;
    background: var(--border);
    padding: 0.15em 0.35em;
    border-radius: 4px;
  }
  .post-content :global(pre) {
    background: #1e1e1e;
    color: #d4d4d4;
    padding: 1.25rem;
    border-radius: 8px;
    overflow-x: auto;
    margin-bottom: 1.25rem;
    font-size: 0.9rem;
    line-height: 1.6;
  }
  .post-content :global(pre code) {
    background: none;
    padding: 0;
  }
  .post-content :global(strong) {
    font-weight: 650;
  }
  .post-footer {
    margin-top: 3rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--border);
  }
  .post-footer a {
    font-size: 0.9rem;
    font-weight: 500;
  }
  @media (max-width: 640px) {
    .post {
      padding: 1.5rem 1.25rem;
    }
    h1 {
      font-size: 1.5rem;
    }
  }
</style>
