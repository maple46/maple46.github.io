---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import PostCard from "../../components/PostCard.astro";

const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<Layout title="Blog | Portfolio" description="ブログ記事一覧">
  <Header />
  <main class="blog-list">
    <h1>Blog</h1>
    <div class="posts-grid">
      {
        posts.map((post) => (
          <PostCard
            title={post.data.title}
            description={post.data.description}
            pubDate={post.data.pubDate}
            slug={post.id}
          />
        ))
      }
    </div>
    {posts.length === 0 && <p class="empty">まだ記事がありません。</p>}
  </main>
  <Footer />
</Layout>

<style>
  .blog-list {
    max-width: var(--max-w);
    margin: 0 auto;
    padding: 2rem 1.5rem;
  }
  h1 {
    font-size: 2rem;
    font-weight: 800;
    letter-spacing: -0.03em;
    margin-bottom: 1rem;
  }
  .posts-grid {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  .empty {
    color: var(--muted);
    font-size: 0.95rem;
  }
  @media (max-width: 640px) {
    .blog-list {
      padding: 2rem 1.25rem;
    }
    h1 {
      font-size: 1.5rem;
    }
  }
</style>
